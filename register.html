<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Registrar - SK COMPUTERS</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body class="bg-light">
<div class="container py-5">
<div class="row justify-content-center">
<div class="col-md-5">
<div class="card p-4">
<h4 class="mb-3">Criar Conta</h4>
<form id="registerForm">
<input type="text" id="regName" class="form-control mb-2" placeholder="Nome" required>
<input type="email" id="regEmail" class="form-control mb-2" placeholder="E-mail" required>
<input type="password" id="regPass" class="form-control mb-3" placeholder="Senha" required>
<button class="btn btn-success w-100">Registrar</button>
</form>
<div id="regMsg" class="mt-2 small"></div>
</div>
</div>
</div>
</div>


<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>
<script>
const auth = firebase.auth();
const db = firebase.firestore();
document.getElementById('registerForm').addEventListener('submit', async (e)=>{
e.preventDefault();
const name = document.getElementById('regName').value;
const email = document.getElementById('regEmail').value;
const pass = document.getElementById('regPass').value;
try{
const {user} = await auth.createUserWithEmailAndPassword(email, pass);
await db.collection('users').doc(user.uid).set({name,email,role:'customer',createdAt:firebase.firestore.FieldValue.serverTimestamp()});
window.location = 'index.html';
}catch(err){ document.getElementById('regMsg').innerText = err.message; }
});
</script>
</body>
</html>